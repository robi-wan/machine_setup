#require File.dirname(__FILE__) + "/../test_helper"

SetupConfiguration :underleaver do

  category :common do
    param :underleaver_config, 1
    param :distance_photo_sensor, 2
    param :distance_blade_to_sheet_drive, 3
    param :distance_sheet_drive_to_sheet_exit, 4
    param :time_for_cutting_unit, 5

    param :paper_jam_detection_active, 6
    param :paper_jam_detection_signal_length, 7 do
      depends_on :paper_jam_detection_active
    end
    param :paper_jam_detection_check_time, 8 do
      depends_on :paper_jam_detection_active
    end

    param :ext_enabling_following_unit, 10
    param :ext_enabling_following_unit_method, 11 do
      depends_on :ext_enabling_following_unit
    end
    param :ext_enabling_following_unit_delay, 12 do
      depends_on :ext_enabling_following_unit
    end

    param :ext_enabling_previous_unit, 13
  end

  # paper roll drive
  category :drives do
    param :paper_roll_config, 300
    param :paper_roll_distance_revolution, 301 do
      depends_on :paper_roll_config
    end
    param :paper_roll_gear_in, 302 do
      depends_on :paper_roll_config
    end
    param :paper_roll_gear_out, 303 do
      depends_on :paper_roll_config
    end
  end

  # blade drive
  category :drives do

    param :blade_config, 310
    param :blade_distance_revolution, 311 do
      depends_on :blade_config
    end
    param :blade_gear_in, 312 do
      depends_on :blade_config
    end
    param :blade_gear_out, 313 do
      depends_on :blade_config
    end
  end

  #paper feed drive
  category :drives do

    param :paper_feed_config, 320
    param :paper_feed_distance_revolution, 321 do
      depends_on :paper_feed_config
    end
    param :paper_feed_gear_in, 322 do
      depends_on :paper_feed_config
    end
    param :paper_feed_gear_out, 323 do
      depends_on :paper_feed_config
    end
  end

  #transport drive
  category :drives do

    param :transport_drive_config, 330
    param :transport_distance_revolution, 331 do
      depends_on :transport_drive_config
    end
    param :transport_gear_in, 332 do
      depends_on :transport_drive_config
    end
    param :transport_gear_out, 333 do
      depends_on :transport_drive_config
    end
    param :transport_belt_length, 334 do
      depends_on :transport_drive_config
    end
  end

  #infeed drive
  category :drives do

    param :infeed_config, 350
    param :infeed_distance_revolution, 351 do
      depends_on :infeed_config
    end
    param :infeed_gear_in, 352 do
      depends_on :infeed_config
    end
    param :infeed_gear_out, 353 do
      depends_on :infeed_config
    end
    param :infeed_belt_length, 354 do
      depends_on :infeed_config
    end
  end

  setting do
    min (0..0)
    max (0..0)
    balance_min (3000..3029)
    balance_max (3030..3059)
  end

end

# todo remove test code
puts SetupConfiguration::SuiteGenerator.instance.suite
pp SetupConfiguration::SuiteGenerator.instance.suite
puts SetupConfiguration::SuiteGenerator.instance.suite.categories.size

pp SetupConfiguration::SuiteGenerator.instance.suite.find_param(:blade_gear_in)
pp SetupConfiguration::SuiteGenerator.instance.suite.find_param(:none)
puts SetupConfiguration::SuiteGenerator.instance.suite.settings.balance_maximum.end
puts SetupConfiguration::SuiteGenerator.instance.suite.settings.balance_maximum.first
puts SetupConfiguration::SuiteGenerator.instance.suite.settings.balance_minimum.end
puts SetupConfiguration::SuiteGenerator.instance.suite.settings.balance_minimum.first
